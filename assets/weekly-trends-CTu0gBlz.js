import{a as g}from"./vendor-DW_MHI2K.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function o(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(t){if(t.ep)return;t.ep=!0;const s=o(t);fetch(t.href,s)}})();document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("modalTeam"),r=document.querySelector(".footerButton"),o=document.querySelector(".modalCloseButton");r.onclick=function(){e.style.display="block"},o.onclick=function(){e.style.display="none"},window.onclick=function(n){n.target===e&&(e.style.display="none")},document.onkeydown=function(n){n.key==="Escape"&&(e.style.display="none")}});const f="9a0d30072ad38e4a4c69d8b167f5dfc1",h="https://api.themoviedb.org/3",m="yedek-gorsel-url.jpg";let d=JSON.parse(localStorage.getItem("movieLibrary"))||[];const y=async(e,r={})=>{var o;try{return(await g.get(`${h}${e}`,{params:{api_key:f,language:"en-US",...r}})).data}catch(n){return console.error(`API isteği başarısız (${e}):`,((o=n.response)==null?void 0:o.data)||n.message),null}},L=async()=>{var r;const e=await y("/genre/movie/list");return((r=e==null?void 0:e.genres)==null?void 0:r.reduce((o,n)=>(o[n.id]=n.name,o),{}))||{}},b=async()=>{const e=await y("/trending/movie/day");return(e==null?void 0:e.results)||[]},w=async(e=3)=>{const r=document.querySelector(".weeklyTrendsContent");r.innerHTML="";try{const[o,n]=await Promise.all([b(),L()]);if(!o.length){console.warn("Film bulunamadı."),r.innerHTML="<p>Film bulunamadı.</p>";return}o.slice(0,e).forEach(t=>{var u;const s=t.poster_path?`https://image.tmdb.org/t/p/w500${t.poster_path}`:m,c=((u=t.genre_ids)==null?void 0:u.map(a=>n[a]||"Unknown").join(", "))||"Bilinmiyor",l=t.release_date||"Tarih bilinmiyor",i=document.createElement("div");i.classList.add("MovieCard"),i.style.cursor="pointer",i.dataset.movie=JSON.stringify(t),i.innerHTML=`
        <img class="MovieCardİmg" src="${s}" alt="${t.title}" />
        <div class="gradient-container"></div>
        <h3>${t.title}</h3>
        <p>${c} / ${l}</p>
        <div class="stars">${v(t.vote_average)}</div>
      `,i.addEventListener("click",()=>$(t,n)),r.appendChild(i)})}catch(o){console.error("Filmler yüklenirken hata oluştu:",o),r.innerHTML="<p>Failed to load movies. Please try again later.</p>"}},v=e=>{const r=Math.round(e)/2;return"⭐".repeat(Math.floor(r))},$=(e,r)=>{var u;const o=document.querySelector("#WTmovieModal"),n=document.querySelector(".WTmodal-content");if(!o||!n){console.error("Modal elemanları bulunamadı.");return}const t=e.poster_path?`https://image.tmdb.org/t/p/w500${e.poster_path}`:m,s=d.some(a=>a.id===e.id),c=((u=e.genre_ids)==null?void 0:u.map(a=>r[a]||"Unknown").join(", "))||"Bilinmiyor";n.innerHTML=`
    <span class="close">&times;</span>
    <img src="${t}" alt="${e.title}" class="WTmodal-img"/>
    <h2>${e.title}</h2>
    <p><strong>Vote / Votes:</strong> ${e.vote_average.toFixed(1)} / ${e.vote_count}</p>
    <p><strong>Popularity:</strong> ${e.popularity}</p>
    <p><strong>Genre:</strong> ${c}</p>
    <p><strong>About:</strong> ${e.overview||"Açıklama mevcut değil."}</p>
    <button class="addToLibraryButton" data-movie-id="${e.id}">
      ${s?"Remove from library":"Add to my library"}
    </button>
  `,o.style.display="block";const l=a=>{(a.target===o||a.target.classList.contains("close")||a.key==="Escape")&&(o.style.display="none",window.removeEventListener("click",l),window.removeEventListener("keydown",l))};window.addEventListener("click",l),window.addEventListener("keydown",l);const i=n.querySelector(".addToLibraryButton");i.addEventListener("click",()=>E(e,i))},E=(e,r)=>{d.some(n=>n.id===e.id)?(d=d.filter(n=>n.id!==e.id),r.innerText="Add to my library"):(d.push(e),r.innerText="Remove from library"),localStorage.setItem("movieLibrary",JSON.stringify(d))};document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>w(3),100)});var p;(p=document.querySelector("#viewAll"))==null||p.addEventListener("click",()=>{window.location.href=`${window.location.origin}/cinemania-team-project/catalog.html`});
//# sourceMappingURL=weekly-trends-CTu0gBlz.js.map
