{"version":3,"file":"weekly-trends-46uYeaMi.js","sources":["../../src/js/footer.js","../../src/js/weekly-trends.js"],"sourcesContent":["document.addEventListener('DOMContentLoaded', function () {\n  const modal = document.getElementById('modalTeam');\n  const btn = document.querySelector('.footerButton');\n  const span = document.querySelector('.modalCloseButton');\n\n  btn.onclick = function () {\n    modal.style.display = 'block';\n  };\n\n  span.onclick = function () {\n    modal.style.display = 'none';\n  };\n\n  window.onclick = function (event) {\n    if (event.target === modal) {\n      modal.style.display = 'none';\n    }\n  };\n\n  document.onkeydown = function (event) {\n    if (event.key === 'Escape') {\n      modal.style.display = 'none';\n    }\n  };\n});\n","import axios from 'axios';\n\nconst API_KEY = '9a0d30072ad38e4a4c69d8b167f5dfc1';\nconst BASE_URL = 'https://api.themoviedb.org/3';\nconst DEFAULT_POSTER = 'yedek-gorsel-url.jpg';\n\n// API İsteklerini Doğru Formatta Yap\nconst fetchFromAPI = async (endpoint, params = {}) => {\n  try {\n    const response = await axios.get(`${BASE_URL}${endpoint}`, {\n      params: { api_key: API_KEY, language: 'en-US', ...params },\n    });\n    return response.data;\n  } catch (error) {\n    console.error(\n      `API isteği basarisiz (${endpoint}):`,\n      error.response?.data || error.message\n    );\n    return null;\n  }\n};\n\n// Film türlerini çekip ID → isim dönüşümü yap\nconst getGenres = async () => {\n  const data = await fetchFromAPI('/genre/movie/list');\n  return (\n    data?.genres?.reduce((acc, genre) => {\n      acc[genre.id] = genre.name;\n      return acc;\n    }, {}) || {}\n  );\n};\n\n// Günlük trend filmleri getir\nconst fetchTrendingMovies = async () => {\n  const data = await fetchFromAPI('/trending/movie/day');\n  return data?.results || [];\n};\n\n// Filmleri Listeleme ve Modal Açma\nconst renderMovies = async (movieCount = 3) => {\n  const movieContainer = document.querySelector('.weeklyTrendsContent');\n  movieContainer.innerHTML = '';\n\n  try {\n    const [movies, genreMap] = await Promise.all([\n      fetchTrendingMovies(),\n      getGenres(),\n    ]);\n\n    if (!movies.length) {\n      console.warn('Film bulunamadı.');\n      movieContainer.innerHTML = '<p>Film bulunamadı.</p>';\n      return;\n    }\n\n    movies.slice(0, movieCount).forEach(movie => {\n      const imageUrl = movie.poster_path\n        ? `https://image.tmdb.org/t/p/w500${movie.poster_path}`\n        : DEFAULT_POSTER;\n      const genres =\n        movie.genre_ids?.map(id => genreMap[id] || 'Unknown').join(', ') ||\n        'Bilinmiyor';\n      const releaseDate = movie.release_date || 'Tarih bilinmiyor';\n\n      // Film kartını oluştur\n      const movieElement = document.createElement('div');\n      movieElement.classList.add('MovieCard');\n      movieElement.style.cursor = 'pointer';\n      movieElement.dataset.movie = JSON.stringify(movie);\n\n      movieElement.innerHTML = `\n        <img class=\"MovieCardİmg\" src=\"${imageUrl}\" alt=\"${movie.title}\" />\n        <div class=\"gradient-container\"></div>\n        <h3>${movie.title}</h3>\n        <p>${genres} / ${releaseDate}</p>\n      `;\n\n      // Film kartına tıklama event'i ekle (Modal Açma)\n      movieElement.addEventListener('click', () => openModal(movie));\n\n      movieContainer.appendChild(movieElement);\n    });\n  } catch (error) {\n    console.error('Filmler yüklenirken hata oluştu:', error);\n    movieContainer.innerHTML =\n      '<p>Failed to load movies. Please try again later.</p>';\n  }\n};\n\n// Modalı Açma Fonksiyonu\nconst openModal = movie => {\n  const modal = document.querySelector('#WTmovieModal');\n  const modalContent = document.querySelector('.WTmodal-content');\n\n  if (!modal || !modalContent) {\n    console.error('Modal elemanları bulunamadı.');\n    return;\n  }\n\n  const posterUrl = movie.poster_path\n    ? `https://image.tmdb.org/t/p/w500${movie.poster_path}`\n    : DEFAULT_POSTER;\n\n  modalContent.innerHTML = `\n    <span class=\"close\">&times;</span>\n    <img src=\"${posterUrl}\" alt=\"${movie.title}\" class=\"WTmodal-img\"/>\n    <h2>${movie.title}</h2>\n    <p><strong>Release Date:</strong> ${\n      movie.release_date || 'Tarih bilinmiyor'\n    }</p>\n    <p><strong>Popularity:</strong> ${movie.popularity || 'Bilinmiyor'}</p>\n    <p><strong>Overview:</strong> ${\n      movie.overview || 'Açıklama mevcut değil.'\n    }</p>\n  `;\n\n  modal.style.display = 'block';\n\n  // Modal kapatma event'leri\n  const closeModal = event => {\n    if (\n      event.target === modal ||\n      event.target.classList.contains('close') ||\n      event.key === 'Escape'\n    ) {\n      modal.style.display = 'none';\n      window.removeEventListener('click', closeModal);\n      window.removeEventListener('keydown', closeModal);\n    }\n  };\n\n  window.addEventListener('click', closeModal);\n  window.addEventListener('keydown', closeModal); // ESC tuşu ile kapatma\n};\n\n// Sayfa açıldığında ilk 3 filmi göster\ndocument.addEventListener('DOMContentLoaded', () => {\n  setTimeout(() => renderMovies(3), 100);\n});\n\n// \"View All\" Butonu → Katalog Sayfasına Yönlendirme\ndocument.querySelector('#viewAll')?.addEventListener('click', () => {\n  window.location.href = 'catalog.html';\n});\n"],"names":["modal","btn","span","event","API_KEY","BASE_URL","DEFAULT_POSTER","fetchFromAPI","endpoint","params","axios","error","_a","getGenres","data","acc","genre","fetchTrendingMovies","renderMovies","movieCount","movieContainer","movies","genreMap","movie","imageUrl","genres","id","releaseDate","movieElement","openModal","modalContent","posterUrl","closeModal"],"mappings":"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"}