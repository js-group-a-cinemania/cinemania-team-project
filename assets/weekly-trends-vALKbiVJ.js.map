{"version":3,"file":"weekly-trends-vALKbiVJ.js","sources":["../../src/js/footer.js","../../src/js/weekly-trends.js"],"sourcesContent":["document.addEventListener('DOMContentLoaded', function () {\n  const modal = document.getElementById('modalTeam');\n  const btn = document.querySelector('.footerButton');\n  const span = document.querySelector('.modalCloseButton');\n\n  btn.onclick = function () {\n    modal.style.display = 'block';\n  };\n\n  span.onclick = function () {\n    modal.style.display = 'none';\n  };\n\n  window.onclick = function (event) {\n    if (event.target === modal) {\n      modal.style.display = 'none';\n    }\n  };\n\n  document.onkeydown = function (event) {\n    if (event.key === 'Escape') {\n      modal.style.display = 'none';\n    }\n  };\n});\n","import axios from 'axios';\n\nconst API_KEY = '9a0d30072ad38e4a4c69d8b167f5dfc1';\nconst BASE_URL = 'https://api.themoviedb.org/3';\nconst DEFAULT_POSTER = 'yedek-gorsel-url.jpg';\n\nlet movieLibrary = JSON.parse(localStorage.getItem('movieLibrary')) || [];\n\nconst fetchFromAPI = async (endpoint, params = {}) => {\n  try {\n    const response = await axios.get(`${BASE_URL}${endpoint}`, {\n      params: { api_key: API_KEY, language: 'en-US', ...params },\n    });\n    return response.data;\n  } catch (error) {\n    console.error(\n      `API isteği başarısız (${endpoint}):`,\n      error.response?.data || error.message\n    );\n    return null;\n  }\n};\n\nconst getGenres = async () => {\n  const data = await fetchFromAPI('/genre/movie/list');\n  return (\n    data?.genres?.reduce((acc, genre) => {\n      acc[genre.id] = genre.name;\n      return acc;\n    }, {}) || {}\n  );\n};\n\nconst fetchTrendingMovies = async () => {\n  const data = await fetchFromAPI('/trending/movie/day');\n  return data?.results || [];\n};\n\nconst renderMovies = async (movieCount = 3) => {\n  const movieContainer = document.querySelector('.weeklyTrendsContent');\n  movieContainer.innerHTML = '';\n\n  try {\n    const [movies, genreMap] = await Promise.all([\n      fetchTrendingMovies(),\n      getGenres(),\n    ]);\n\n    if (!movies.length) {\n      console.warn('Film bulunamadı.');\n      movieContainer.innerHTML = '<p>Film bulunamadı.</p>';\n      return;\n    }\n\n    movies.slice(0, movieCount).forEach(movie => {\n      const imageUrl = movie.poster_path\n        ? `https://image.tmdb.org/t/p/w500${movie.poster_path}`\n        : DEFAULT_POSTER;\n      const genres =\n        movie.genre_ids?.map(id => genreMap[id] || 'Unknown').join(', ') ||\n        'Bilinmiyor';\n      const releaseDate = movie.release_date || 'Tarih bilinmiyor';\n\n      const movieElement = document.createElement('div');\n      movieElement.classList.add('MovieCard');\n      movieElement.style.cursor = 'pointer';\n      movieElement.dataset.movie = JSON.stringify(movie);\n\n      movieElement.innerHTML = `\n        <img class=\"MovieCardİmg\" src=\"${imageUrl}\" alt=\"${movie.title}\" />\n        <div class=\"gradient-container\"></div>\n        <h3>${movie.title}</h3>\n        <p>${genres} / ${releaseDate}</p>\n        <div class=\"stars\">${getStarRating(movie.vote_average)}</div>\n      `;\n\n      movieElement.addEventListener('click', () => openModal(movie, genreMap));\n      movieContainer.appendChild(movieElement);\n    });\n  } catch (error) {\n    console.error('Filmler yüklenirken hata oluştu:', error);\n    movieContainer.innerHTML =\n      '<p>Failed to load movies. Please try again later.</p>';\n  }\n};\n\nconst getStarRating = vote => {\n  const fullStars = Math.round(vote) / 2;\n  return '⭐'.repeat(Math.floor(fullStars));\n};\n\nconst openModal = (movie, genreMap) => {\n  const modal = document.querySelector('#WTmovieModal');\n  const modalContent = document.querySelector('.WTmodal-content');\n\n  if (!modal || !modalContent) {\n    console.error('Modal elemanları bulunamadı.');\n    return;\n  }\n\n  const posterUrl = movie.poster_path\n    ? `https://image.tmdb.org/t/p/w500${movie.poster_path}`\n    : DEFAULT_POSTER;\n  const isInLibrary = movieLibrary.some(libMovie => libMovie.id === movie.id);\n  const genres =\n    movie.genre_ids?.map(id => genreMap[id] || 'Unknown').join(', ') ||\n    'Bilinmiyor';\n\n  modalContent.innerHTML = `\n    <span class=\"close\">&times;</span>\n    <img src=\"${posterUrl}\" alt=\"${movie.title}\" class=\"WTmodal-img\"/>\n    <h2>${movie.title}</h2>\n    <p><strong>Vote / Votes:</strong> ${movie.vote_average.toFixed(1)} / ${\n    movie.vote_count\n  }</p>\n    <p><strong>Popularity:</strong> ${movie.popularity}</p>\n    <p><strong>Genre:</strong> ${genres}</p>\n    <p><strong>About:</strong> ${movie.overview || 'Açıklama mevcut değil.'}</p>\n    <button class=\"addToLibraryButton\" data-movie-id=\"${movie.id}\">\n      ${isInLibrary ? 'Remove from library' : 'Add to my library'}\n    </button>\n  `;\n\n  modal.style.display = 'block';\n\n  const closeModal = event => {\n    if (\n      event.target === modal ||\n      event.target.classList.contains('close') ||\n      event.key === 'Escape'\n    ) {\n      modal.style.display = 'none';\n      window.removeEventListener('click', closeModal);\n      window.removeEventListener('keydown', closeModal);\n    }\n  };\n\n  window.addEventListener('click', closeModal);\n  window.addEventListener('keydown', closeModal);\n\n  const button = modalContent.querySelector('.addToLibraryButton');\n  button.addEventListener('click', () => handleLibraryAction(movie, button));\n};\n\nconst handleLibraryAction = (movie, button) => {\n  const isInLibrary = movieLibrary.some(libMovie => libMovie.id === movie.id);\n\n  if (isInLibrary) {\n    movieLibrary = movieLibrary.filter(libMovie => libMovie.id !== movie.id);\n    button.innerText = 'Add to my library';\n  } else {\n    movieLibrary.push(movie);\n    button.innerText = 'Remove from library';\n  }\n\n  localStorage.setItem('movieLibrary', JSON.stringify(movieLibrary));\n};\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  setTimeout(() => renderMovies(3), 100);\n});\n\ndocument.querySelector('#viewAll')?.addEventListener('click', () => {\n  window.location.href = `${window.location.origin}/cinemania-team-project/catalog.html`;\n});\n"],"names":["modal","btn","span","event","API_KEY","BASE_URL","DEFAULT_POSTER","movieLibrary","fetchFromAPI","endpoint","params","axios","error","_a","getGenres","data","acc","genre","fetchTrendingMovies","renderMovies","movieCount","movieContainer","movies","genreMap","movie","imageUrl","genres","id","releaseDate","movieElement","getStarRating","openModal","vote","fullStars","modalContent","posterUrl","isInLibrary","libMovie","closeModal","button","handleLibraryAction"],"mappings":"+uBAAA,SAAS,iBAAiB,mBAAoB,UAAY,CACxD,MAAMA,EAAQ,SAAS,eAAe,WAAW,EAC3CC,EAAM,SAAS,cAAc,eAAe,EAC5CC,EAAO,SAAS,cAAc,mBAAmB,EAEvDD,EAAI,QAAU,UAAY,CACxBD,EAAM,MAAM,QAAU,OACvB,EAEDE,EAAK,QAAU,UAAY,CACzBF,EAAM,MAAM,QAAU,MACvB,EAED,OAAO,QAAU,SAAUG,EAAO,CAC5BA,EAAM,SAAWH,IACnBA,EAAM,MAAM,QAAU,OAEzB,EAED,SAAS,UAAY,SAAUG,EAAO,CAChCA,EAAM,MAAQ,WAChBH,EAAM,MAAM,QAAU,OAEzB,CACH,CAAC,ECtBD,MAAMI,EAAU,mCACVC,EAAW,+BACXC,EAAiB,uBAEvB,IAAIC,EAAe,KAAK,MAAM,aAAa,QAAQ,cAAc,CAAC,GAAK,CAAE,EAEzE,MAAMC,EAAe,MAAOC,EAAUC,EAAS,KAAO,OACpD,GAAI,CAIF,OAHiB,MAAMC,EAAM,IAAI,GAAGN,CAAQ,GAAGI,CAAQ,GAAI,CACzD,OAAQ,CAAE,QAASL,EAAS,SAAU,QAAS,GAAGM,CAAQ,CAChE,CAAK,GACe,IACjB,OAAQE,EAAO,CACd,eAAQ,MACN,yBAAyBH,CAAQ,OACjCI,EAAAD,EAAM,WAAN,YAAAC,EAAgB,OAAQD,EAAM,OAC/B,EACM,IACX,CACA,EAEME,EAAY,SAAY,OAC5B,MAAMC,EAAO,MAAMP,EAAa,mBAAmB,EACnD,QACEK,EAAAE,GAAA,YAAAA,EAAM,SAAN,YAAAF,EAAc,OAAO,CAACG,EAAKC,KACzBD,EAAIC,EAAM,EAAE,EAAIA,EAAM,KACfD,GACN,CAAE,KAAK,CAAA,CAEd,EAEME,EAAsB,SAAY,CACtC,MAAMH,EAAO,MAAMP,EAAa,qBAAqB,EACrD,OAAOO,GAAA,YAAAA,EAAM,UAAW,CAAE,CAC5B,EAEMI,EAAe,MAAOC,EAAa,IAAM,CAC7C,MAAMC,EAAiB,SAAS,cAAc,sBAAsB,EACpEA,EAAe,UAAY,GAE3B,GAAI,CACF,KAAM,CAACC,EAAQC,CAAQ,EAAI,MAAM,QAAQ,IAAI,CAC3CL,EAAqB,EACrBJ,EAAW,CACjB,CAAK,EAED,GAAI,CAACQ,EAAO,OAAQ,CAClB,QAAQ,KAAK,kBAAkB,EAC/BD,EAAe,UAAY,0BAC3B,MACN,CAEIC,EAAO,MAAM,EAAGF,CAAU,EAAE,QAAQI,GAAS,OAC3C,MAAMC,EAAWD,EAAM,YACnB,kCAAkCA,EAAM,WAAW,GACnDlB,EACEoB,IACJb,EAAAW,EAAM,YAAN,YAAAX,EAAiB,IAAIc,GAAMJ,EAASI,CAAE,GAAK,WAAW,KAAK,QAC3D,aACIC,EAAcJ,EAAM,cAAgB,mBAEpCK,EAAe,SAAS,cAAc,KAAK,EACjDA,EAAa,UAAU,IAAI,WAAW,EACtCA,EAAa,MAAM,OAAS,UAC5BA,EAAa,QAAQ,MAAQ,KAAK,UAAUL,CAAK,EAEjDK,EAAa,UAAY;AAAA,yCACUJ,CAAQ,UAAUD,EAAM,KAAK;AAAA;AAAA,cAExDA,EAAM,KAAK;AAAA,aACZE,CAAM,MAAME,CAAW;AAAA,6BACPE,EAAcN,EAAM,YAAY,CAAC;AAAA,QAGxDK,EAAa,iBAAiB,QAAS,IAAME,EAAUP,EAAOD,CAAQ,CAAC,EACvEF,EAAe,YAAYQ,CAAY,CAC7C,CAAK,CACF,OAAQjB,EAAO,CACd,QAAQ,MAAM,mCAAoCA,CAAK,EACvDS,EAAe,UACb,uDACN,CACA,EAEMS,EAAgBE,GAAQ,CAC5B,MAAMC,EAAY,KAAK,MAAMD,CAAI,EAAI,EACrC,MAAO,IAAI,OAAO,KAAK,MAAMC,CAAS,CAAC,CACzC,EAEMF,EAAY,CAACP,EAAOD,IAAa,OACrC,MAAMvB,EAAQ,SAAS,cAAc,eAAe,EAC9CkC,EAAe,SAAS,cAAc,kBAAkB,EAE9D,GAAI,CAAClC,GAAS,CAACkC,EAAc,CAC3B,QAAQ,MAAM,8BAA8B,EAC5C,MACJ,CAEE,MAAMC,EAAYX,EAAM,YACpB,kCAAkCA,EAAM,WAAW,GACnDlB,EACE8B,EAAc7B,EAAa,KAAK8B,GAAYA,EAAS,KAAOb,EAAM,EAAE,EACpEE,IACJb,EAAAW,EAAM,YAAN,YAAAX,EAAiB,IAAIc,GAAMJ,EAASI,CAAE,GAAK,WAAW,KAAK,QAC3D,aAEFO,EAAa,UAAY;AAAA;AAAA,gBAEXC,CAAS,UAAUX,EAAM,KAAK;AAAA,UACpCA,EAAM,KAAK;AAAA,wCACmBA,EAAM,aAAa,QAAQ,CAAC,CAAC,MACjEA,EAAM,UACP;AAAA,sCACmCA,EAAM,UAAU;AAAA,iCACrBE,CAAM;AAAA,iCACNF,EAAM,UAAY,wBAAwB;AAAA,wDACnBA,EAAM,EAAE;AAAA,QACxDY,EAAc,sBAAwB,mBAAmB;AAAA;AAAA,IAI/DpC,EAAM,MAAM,QAAU,QAEtB,MAAMsC,EAAanC,GAAS,EAExBA,EAAM,SAAWH,GACjBG,EAAM,OAAO,UAAU,SAAS,OAAO,GACvCA,EAAM,MAAQ,YAEdH,EAAM,MAAM,QAAU,OACtB,OAAO,oBAAoB,QAASsC,CAAU,EAC9C,OAAO,oBAAoB,UAAWA,CAAU,EAEnD,EAED,OAAO,iBAAiB,QAASA,CAAU,EAC3C,OAAO,iBAAiB,UAAWA,CAAU,EAE7C,MAAMC,EAASL,EAAa,cAAc,qBAAqB,EAC/DK,EAAO,iBAAiB,QAAS,IAAMC,EAAoBhB,EAAOe,CAAM,CAAC,CAC3E,EAEMC,EAAsB,CAAChB,EAAOe,IAAW,CACzBhC,EAAa,KAAK8B,GAAYA,EAAS,KAAOb,EAAM,EAAE,GAGxEjB,EAAeA,EAAa,OAAO8B,GAAYA,EAAS,KAAOb,EAAM,EAAE,EACvEe,EAAO,UAAY,sBAEnBhC,EAAa,KAAKiB,CAAK,EACvBe,EAAO,UAAY,uBAGrB,aAAa,QAAQ,eAAgB,KAAK,UAAUhC,CAAY,CAAC,CACnE,EAEA,SAAS,iBAAiB,mBAAoB,IAAM,CAClD,WAAW,IAAMY,EAAa,CAAC,EAAG,GAAG,CACvC,CAAC,SAEDN,EAAA,SAAS,cAAc,UAAU,IAAjC,MAAAA,EAAoC,iBAAiB,QAAS,IAAM,CAClE,OAAO,SAAS,KAAO,GAAG,OAAO,SAAS,MAAM,sCAClD"}