import{a as D}from"./vendor-DW_MHI2K.js";import"./weekly-trends-CTu0gBlz.js";const k="myLibrary";function u(){return JSON.parse(localStorage.getItem(k))||[]}function O(e){console.log(`ğŸ“Œ Film ekleniyor: ${e.title}`);let t=u();t.some(n=>n.id===e.id)?(console.log("âš ï¸ Film zaten kÃ¼tÃ¼phanede!",u()),alert(`${e.title} is already in My Library!`)):(t.push(e),localStorage.setItem("myLibrary",JSON.stringify(t)),console.log("âœ… Film baÅŸarÄ±yla eklendi!",u()),Swal.fire({title:`${e.title} Added to Library! ğŸ¬`,icon:"success",confirmButtonText:"OK",confirmButtonColor:"#ff9800",timer:2500,toast:!0,showCloseButton:!0}),window.location.pathname.includes("mylibrary.html")&&displayLibraryMovies())}function C(e){let t=u();const n=t.find(a=>a.id===e);n&&(t=t.filter(a=>a.id!==e),localStorage.setItem(k,JSON.stringify(t)),Swal.fire({text:`${n.title} has been removed from your library.`,icon:"error",timer:2e3,showConfirmButton:!1}),window.location.pathname.includes("mylibrary.html")&&displayLibraryMovies())}function q(e){return u().some(n=>n.id===e.id)?(C(e.id),"Add to Library"):(O(e),"Remove from Library")}const $="myLibrary";function _(){return JSON.parse(localStorage.getItem($))||[]}function A(e){let t=_().filter(n=>n.id!==e);localStorage.setItem($,JSON.stringify(t)),console.log(`âŒ Movie ID ${e} removed from Library!`)}//! MOBIL MENU
document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("menu-toggle"),t=document.getElementById("mobil"),n=document.getElementById("backdrop"),a=document.getElementById("mobil-nav");e.addEventListener("click",function(o){o.preventDefault(),t.classList.add("active"),n.classList.add("active"),a.style.display="block"}),document.addEventListener("click",function(o){const s=t.contains(o.target),i=e.contains(o.target);!s&&!i&&(t.classList.remove("active"),n.classList.remove("active"))})});function F(){const e=document.getElementById("genreFilter");if(!e)return;let t=JSON.parse(localStorage.getItem("myLibrary"))||[],n=new Set;t.forEach(a=>{a.genres&&a.genres.forEach(o=>n.add(JSON.stringify({id:o.id,name:o.name})))}),e.innerHTML='<option value="all">All Genres</option>',n.forEach(a=>{let o=JSON.parse(a);e.innerHTML+=`<option value="${o.id}">${o.name}</option>`}),e.addEventListener("change",h)}function h(){const e=document.getElementById("genreFilter").value;let t=JSON.parse(localStorage.getItem("myLibrary"))||[];e!=="all"&&(t=t.filter(n=>n.genres.some(a=>a.id==e))),N(t)}function N(e){const t=document.querySelector(".library-movies"),n=document.querySelector(".empty-library-message");if(!t||!n){console.error("âŒ Library container veya boÅŸ mesaj elementi bulunamadÄ±!");return}if(e.length===0){n.style.display="block",t.innerHTML="<p>No movies found in this genre!</p>";return}else n.style.display="none";t.innerHTML=e.map(a=>`
        <li class="movie-card">
            <img src="https://image.tmdb.org/t/p/w500${a.poster_path}" alt="${a.title}">
            <h3>${a.title}</h3>
            <p><strong>Release Date:</strong> ${a.release_date}</p>
            <button class="library-btn" data-id="${a.id}">Remove Add Library</button>
        </li>
    `).join(""),document.querySelectorAll(".library-btn").forEach(a=>{a.addEventListener("click",o=>{const s=Number(o.target.dataset.id);A(s),h()})})}document.addEventListener("DOMContentLoaded",()=>{document.getElementById("genreFilter")&&(F(),h())});document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector(".search-button");e&&e.addEventListener("click",function(){window.location.href="catalog.html"})});document.addEventListener("DOMContentLoaded",async()=>{await S()});console.log("ğŸ“Œ library.js yÃ¼klendi mi?",u());//! DARK MODE-LIGHT MODE
document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("darkmode-toggle"),t=document.body;localStorage.getItem("darkMode")==="enabled"&&(t.classList.add("dark-mode"),e.checked=!0),e.addEventListener("change",function(){this.checked?(t.classList.add("dark-mode"),localStorage.setItem("darkMode","enabled")):(t.classList.remove("dark-mode"),localStorage.setItem("darkMode","disabled"))})});document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".year-dropdown");if(!e){console.error("Hata: Year dropdown elementi HTML iÃ§inde bulunamadÄ±!");return}e.addEventListener("change",async function(){const t=this.value;console.log(`ğŸ“… ${t} yÄ±lÄ±na ait filmler listeleniyor...`),await E(t)})});//! DARK MODE-LIGHT MODE SONU
const v="9a0d30072ad38e4a4c69d8b167f5dfc1",f="https://api.themoviedb.org/3";document.addEventListener("DOMContentLoaded",async()=>{await T(),await w()});document.addEventListener("DOMContentLoaded",()=>{w()});function w(){const e=document.querySelector(".year-dropdown");if(!e){console.error("Year dropdown elementi bulunamadÄ±!");return}const t=new Date().getFullYear(),n=1900;e.innerHTML='<option value="">Year</option>';for(let a=t;a>=n;a--){const o=document.createElement("option");o.value=a,o.textContent=a,e.appendChild(o)}}document.querySelector(".year-dropdown").addEventListener("change",async function(){const e=this.value;e&&(console.log(`ğŸ“… ${e} yÄ±lÄ±na ait filmler listeleniyor...`),await E(e))});async function E(e){const t="9a0d30072ad38e4a4c69d8b167f5dfc1",n="https://api.themoviedb.org/3";try{const o=await(await fetch(`${n}/discover/movie?api_key=${t}&primary_release_year=${e}`)).json();o.results.length>0?b(o.results):(console.warn(`âŒ ${e} yÄ±lÄ±na ait film bulunamadÄ±.`),document.querySelector(".gallery-movies").innerHTML=`<p>No movies found for ${e}</p>`)}catch(a){console.error("API'den film listesi alÄ±nÄ±rken hata oluÅŸtu:",a)}}document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".gallery-movies"),t=document.getElementById("movie-modal"),n=document.querySelector(".modal-movie-info-container"),a=document.getElementById("close-modal");if(!e||!t||!n||!a){console.error("Modal veya film galerisi elementi bulunamadÄ±!");return}e.addEventListener("click",async i=>{i.preventDefault();const r=i.target.closest(".gallery-movies-item");if(!r){console.warn("TÄ±klanan Ã¶ÄŸe bir film kartÄ± deÄŸil!");return}const c=r.dataset.id;if(!c){console.error("Film ID bulunamadÄ±!");return}console.log("TÄ±klandÄ±, film ID:",c);try{const d=await s(c);o(d)}catch(d){console.error("Film detaylarÄ± yÃ¼klenirken hata oluÅŸtu:",d)}});function o(i){var p;const r=document.getElementById("movie-modal"),c=document.querySelector(".modal-movie-info-container");c.innerHTML=`
      <h2 class="modal-title">${i.title||"Unknown Title"}</h2>
      <img height="500" class="modal-poster" src="${i.poster_path?`https://image.tmdb.org/t/p/w500${i.poster_path}`:"./img/no-image.png"}" alt="${i.title}" />
      <p><strong>Overview:</strong> ${i.overview||"No description available."}</p>
      <p><strong>Genres:</strong> ${((p=i.genres)==null?void 0:p.map(g=>g.name).join(", "))||"Unknown"}</p>
      <p><strong>Release Date:</strong> ${i.release_date||"Unknown"}</p>
      <button id="add-to-library-btn" class="library-button">${u().some(g=>g.id===i.id)?"âŒ Remove from Library":"ğŸ“š Add to Library"}</button>
    `,r.style.display="flex",r.classList.add("open");const d=document.getElementById("add-to-library-btn");d?d.addEventListener("click",()=>{console.log("ğŸ“Œ Add to Library butonuna tÄ±klandÄ±!"),q(i)}):console.error("âŒ Add to Library butonu bulunamadÄ±!")}a.addEventListener("click",()=>{t.style.display="none",t.classList.remove("open")}),t.addEventListener("click",i=>{i.target===t&&(t.style.display="none",t.classList.remove("open"))}),document.addEventListener("keydown",i=>{i.key==="Escape"&&(t.style.display="none",t.classList.remove("open"))});async function s(i){const d=await(await fetch(`https://api.themoviedb.org/3/movie/${i}?api_key=9a0d30072ad38e4a4c69d8b167f5dfc1`)).json();return console.log("ğŸ¥ API'den Gelen Film Verisi:",d),d}});let I={};async function S(){try{(await(await fetch(`${f}/genre/movie/list?api_key=${v}`)).json()).genres.forEach(n=>{I[n.id]=n.name})}catch(e){console.error("Film tÃ¼rleri alÄ±nÄ±rken hata oluÅŸtu:",e)}}async function T(){await S();const t=await(await fetch(`${f}/trending/movie/week?api_key=${v}`)).json();b(t.results)}function b(e){const t=document.querySelector(".gallery-movies");t.innerHTML=e.map(({title:n,poster_path:a,vote_average:o,id:s,release_date:i,genre_ids:r})=>{const c=i?i.split("-")[0]:"Unknown",d=H(o),p=r.map(g=>I[g]||"Unknown").join(", ");return`
        <li class="gallery-movies-item" data-id="${s}">
          <img class="gallery-movies-img" src="https://image.tmdb.org/t/p/original/${a}" alt="${n}" loading="lazy">
          <div class="gallery-movies-overlay js-modal-info" data-id="${s}"></div>
          <div class="gallery-movies-description">
            <h3 class="gallery-movies-title">${n}</h3>
            <div class="gallery-movies-wrap">
              <p class="gallery-movies-details">${p} | ${c}</p>
            </div>
          </div>
          <div class="star-rating">${d}</div>
        </li>
      `}).join("")}function H(e){const t=Math.round(e/2);return"â˜…".repeat(t)+"â˜†".repeat(5-t)}document.addEventListener("DOMContentLoaded",()=>{T()});//! MOBIL MENU
document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("menu-toggle"),t=document.getElementById("mobil"),n=document.getElementById("backdrop"),a=document.getElementById("mobil-nav");e.addEventListener("click",function(o){o.preventDefault(),t.classList.add("active"),n.classList.add("active"),a.style.display="block"}),document.addEventListener("click",function(o){const s=t.contains(o.target),i=e.contains(o.target);!s&&!i&&(t.classList.remove("active"),n.classList.remove("active"))})});//! MOBIL MENU SON
//!MOVIE SEARCH
document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("search-form"),t=document.getElementById("form-input"),n=document.querySelector(".search-input2"),a=document.querySelector(".close-icon"),o=document.querySelector(".catalog-movie-container");e.addEventListener("submit",async function(i){i.preventDefault();const r=t.value.trim();r&&(await s(r),n.value=r)}),a.addEventListener("click",function(){n.value=""});async function s(i){try{const c=await(await fetch(`${f}/search/movie?api_key=${v}&query=${i}`)).json();c.results.length>0?b(c.results):o.innerHTML='<p class="no-results">OOPS...<br>We are very sorry!<br>We donâ€™t have any results matching your search.</p>'}catch(r){console.error("Hata:",r)}}});//!MOVIE SEARCH SONU
//! PAGINATION KISMI
const M=document.getElementById("pagination-container");let l=1;const L=500;let m=1;async function B(e=1){try{if(e>L){console.error(`Maksimum ${L} sayfayÄ± geÃ§emezsiniz.`);return}const n=await(await fetch(`${f}/movie/popular?api_key=${v}&page=${e}`)).json();m=Math.min(n.total_pages,L),b(n.results),P()}catch(t){console.error("API'den veri alÄ±nÄ±rken hata oluÅŸtu:",t)}}function P(){M.innerHTML="";let e="";l>1&&(e+=`
      <button class="pagination-btn" onclick="changePage(1)">&laquo;</button>
    `),l>1&&(e+=`
      <button class="pagination-btn" onclick="changePage(${l-1})">&lt;</button>
    `),l>3&&(e+='<span class="pagination-dots">...</span>');for(let t=Math.max(1,l-1);t<=Math.min(m,l+1);t++)e+=`
      <button class="pagination-btn ${l===t?"active":""}" onclick="changePage(${t})">${t}</button>
    `;l<m-2&&(e+='<span class="pagination-dots">...</span>'),l<m&&(e+=`
      <button class="pagination-btn" onclick="changePage(${l+1})">&gt;</button>
    `),l<m&&(e+=`
      <button class="pagination-btn" onclick="changePage(${m})">&raquo;</button>
    `),M.innerHTML=e}window.changePage=function(e){e<1||e>m||(l=e,B(e))};document.addEventListener("DOMContentLoaded",()=>{B()});//! PAGINATION SONU
window.global||(window.global=window);const R="cacaf4fb30e4adeda0cb251474aaa7da",Y="https://api.themoviedb.org/3";let y=JSON.parse(localStorage.getItem("movieLibrary"))||[];async function U(){try{const t=(await D.get(`${Y}/movie/upcoming`,{params:{api_key:R,language:"en-US",page:"1"}})).data.results;let n="";if(t.length>0){const o=t[0],s=o.poster_path?`https://image.tmdb.org/t/p/w500${o.poster_path}`:"https://via.placeholder.com/500x750?text=No+Image",i=y.some(r=>r.id===o.id);n=`
        <div class="UpcomingMovie">
          <img class="MoviePoster" src="${s}" alt="${o.title} Poster" />
          <h2 class="MovieTitle">${o.title}</h2>
          <p class="ReleaseDate">Release Date: ${o.release_date}</p>
          <p class="Overview">${o.overview}</p>
          <button type="button" class="addToLibraryButton" data-movie-id="${o.id}">
            ${i?"Remove from library":"Add to my library"}
          </button>
        </div>`}const a=document.querySelector(".movieInfoContent");a&&(a.innerHTML=n),document.querySelectorAll(".addToLibraryButton").forEach(o=>{o.addEventListener("click",j)})}catch(e){console.error("Upcoming filmleri alÄ±rken hata oluÅŸtu:",e.response?e.response.data:e.message)}}function j(e){const t=e.target,n=t.getAttribute("data-movie-id"),a=t.closest(".UpcomingMovie").querySelector(".MovieTitle").innerText,o={id:n,title:a};y.some(i=>i.id===o.id)?(y=y.filter(i=>i.id!==o.id),t.innerText="Add to my library"):(y.push(o),t.innerText="Remove from library"),localStorage.setItem("movieLibrary",JSON.stringify(y))}document.addEventListener("DOMContentLoaded",U);
//# sourceMappingURL=main-l0UXUqdB.js.map
